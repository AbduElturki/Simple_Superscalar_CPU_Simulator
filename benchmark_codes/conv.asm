LDI R15 4120 
LDI R16 4
MUL R12 R15 R16
ADDI R12 R12 20

LDI R15 4250 
LDI R16 4 
MUL R11 R15 R16

LDI R15 0
LDI R16 0

LDI R10 125 
LDI R13 0 



LDI VAL 3
LDI VBS 3
LDI VBL 3
LDI VBS 3

LDI R0 0
LDI R1 0
LDI R5 0
LDI R6 0

;R2 for vax
;R3 for vbx
;R4 image offset
;R5 filter offset
loop:
LDI RZ 0
CMP R9 R0 R10
BZ R9 %exit
LDI R1 0

loop_2:
LDI RZ 0
ADDI R4 R4 0 

MOV R3 R12
VLD VAX R4
VLD VBX R3
VDOT R7 VAX VBX
MOV R8 R7
ADDI R4 R4 1

ADDI R3 R3 1
VLD VAX R4
VLD VBX R3
VDOT R7 VAX VBX
ADD R8 R8 R7
ADDI R4 R4 1


ADDI R3 R3 1
VLD VAX R4
VLD VBX R3
VDOT R7 VAX VBX
ADD R8 R8 R7

ADD R5 R6 R11
ADDI R6 R6 1
ST R8 R5
ADDI R1 R1 1

CMP R9 R1 R10
BZ R9 %loop_2_exit
LDI RZ 0

JI %loop_2


loop_2_exit:
LDI RZ 0
LDI RZ 0
LDI RZ 0
ADDI R4 R4 3
ADDI R0 R0 1
JI %loop

exit:
LDI RZ 0
LDI RZ 0
LDI RZ 0
LDI RZ 0
LDI RZ 0
